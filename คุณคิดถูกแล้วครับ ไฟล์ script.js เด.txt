‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏π‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡πÑ‡∏ü‡∏•‡πå script.js ‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏°‡∏≤‡∏Å (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1,300+ ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) ‡∏´‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡∏î‡∏à‡∏ö (Truncated) ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏±‡∏ö‡∏™‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ Copy ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡∏ö

‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠ "‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô" (Modular Replacement) ‡∏Ñ‡∏£‡∏±‡∏ö

‡∏ú‡∏°‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÜ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏≥‡πÑ‡∏õ "‡∏ó‡∏±‡∏ö" (Replace) ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô

‡πÇ‡∏õ‡∏£‡∏î‡∏ó‡∏≥‡∏ï‡∏≤‡∏° 4 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö:

‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç HTML (‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô fillPages)
‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô fillPages() ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå script.js ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏•‡πâ‡∏ß ‡∏•‡∏ö ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô document.getElementById('page-pos').innerHTML = ... ‡πÅ‡∏•‡∏∞ document.getElementById('page-products').innerHTML = ... ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≠‡∏Å ‡πÅ‡∏•‡∏∞‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

1.1 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢ (POS) - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô (‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏ô document.getElementById('page-pos').innerHTML = ... ‡πÄ‡∏î‡∏¥‡∏°)

JavaScript

    // ‡∏´‡∏ô‡πâ‡∏≤ POS (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á Scan Barcode)
    document.getElementById('page-pos').innerHTML = `
        <h2>‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Point of Sale)</h2>
        <div class="pos-layout">
            <div>
                <form id="scan-barcode-form" style="margin-bottom: 10px; border: 2px solid var(--primary-color); padding: 10px; border-radius: 8px; background-color: #e3f2fd; max-width:none;">
                    <label for="pos-barcode-input" style="font-weight:bold; font-size:1.1em; color:#007bff; text-align:left; display:block;">üì∑ ‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà:</label>
                    <div style="display:flex; gap:5px;">
                        <input type="text" id="pos-barcode-input" placeholder="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏¥‡∏á‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î..." autocomplete="off" style="font-size: 1.2em; text-align: center; flex-grow:1;">
                        <button type="submit" style="width:auto; padding:0 20px;">‡∏ï‡∏Å‡∏•‡∏á</button>
                    </div>
                </form>

                <form id="add-to-cart-form" style="max-width:none;">
                    <label for="pos-date-time-group">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≤‡∏¢:</label>
                    <div id="pos-date-time-group" class="date-time-group">
                        <input type="date" id="pos-date">
                        <input type="time" id="pos-time">
                    </div>
                    
                    <div class="product-quantity-group">
                        <label for="pos-product" class="inline-label">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                        <select id="pos-product" required></select>
                        <input type="number" id="pos-quantity" value="1" min="1" required>
                    </div>

                    <div id="special-price-container" style="display: none; grid-column: 1 / -1; grid-template-columns: 150px 1fr; align-items: center; gap: 15px;">
                        <label for="special-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà:</label>
                        <div>
                            <input type="number" id="special-price" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢" min="0" step="any">
                            <span id="current-price-info" style="font-size: 0.9em; color: #555; margin-left: 10px;"></span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="success">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                        <button type="button" id="toggle-special-price-btn">‡πÉ‡∏ä‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©</button>
                    </div>
                </form>
                <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h3>
                <div class="table-container">
                    <table id="cart-table">
                        <thead><tr><th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th><th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ø</th><th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th><th>‡∏£‡∏ß‡∏°</th><th>‡∏•‡∏ö</th></tr></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div id="cart-summary">
                <div id="payment-method-container">
                    <h4>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h4>
                    <div class="payment-options-wrapper">
                        <label><input type="radio" name="payment-method" value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î" checked> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</label>
                        <label><input type="radio" name="payment-method" value="‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô"> ‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô</label>
                        <label><input type="radio" name="payment-method" value="‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï"> ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</label>
                    </div>
                    <div id="transfer-fields-container">
                        <div style="margin-top:5px;"><label for="transfer-name" style="text-align:left;font-weight:bold;">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô:</label><input type="text" id="transfer-name"></div>
                    </div>
                    <div id="credit-fields-container">
                        <div style="margin-top:5px;"><label for="credit-buyer-name" style="text-align:left;font-weight:bold;">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠ (‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï):</label><input type="text" id="credit-buyer-name"></div>
                        <div style="margin-top:5px;"><label for="credit-due-days" style="text-align:left;font-weight:bold;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï :</label><input type="number" id="credit-due-days" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 7, 15, 30"></div>
                    </div>
                </div>
                
                <div class="cart-action-row">
                    <span class="cart-total-label">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î:</span>
                    <div id="cart-total">‡∏ø0.00</div>
                    <button id="process-sale-btn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</button>
                </div>
            </div>
        </div>`;
1.2 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î (‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏ô document.getElementById('page-products').innerHTML = ... ‡πÄ‡∏î‡∏¥‡∏°)

JavaScript

    // ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏° Input Barcode)
    document.getElementById('page-products').innerHTML = `
        <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2> 
        <p style="text-align:center; margin-top:-10px; margin-bottom:15px; font-size:0.9em;">‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç <b>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</b> ‡πÅ‡∏•‡∏∞ <b>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö</b> ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô<br>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ "‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"</p>
        <form id="product-form"> 
            <input type="hidden" id="product-id"> 
            
            <label for="product-barcode">‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label> 
            <input type="text" id="product-barcode" placeholder="‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"> 

            <label for="product-name">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</label> 
            <input type="text" id="product-name" required> 
      
            <label for="product-unit">‡∏´‡∏ô‡πà‡∏ß‡∏¢:</label> 
            <input type="text" id="product-unit" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏Å‡∏•‡πà‡∏≠‡∏á" required> 
            <div class="form-actions"> 
                <button type="submit" class="success">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button> 
                <button type="button" id="clear-product-form-btn" style="background-color:#6c757d;">‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏°</button> 
            </div> 
        </form> 
        <div class="table-container">
            <table id="product-table"> 
                <thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th><th>‡∏™‡∏ï‡πá‡∏≠‡∏Å</th><th>‡∏´‡∏ô‡πà‡∏ß‡∏¢</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead> 
                <tbody></tbody> 
            </table>
        </div>`;
‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÉ‡∏ô App object)
‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô saveProduct ‡πÅ‡∏•‡∏∞ editProduct ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

JavaScript

                saveProduct(e) {
                    e.preventDefault();
                    const idValue = document.getElementById('product-id').value;
                    const id = idValue ? parseInt(idValue, 10) : null;

                    const newProductData = {
                        barcode: document.getElementById('product-barcode').value.trim(), // [‡πÉ‡∏´‡∏°‡πà] ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
                        name: document.getElementById('product-name').value,
                        unit: document.getElementById('product-unit').value
                    };

                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏ã‡πâ‡∏≥ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å)
                    if (newProductData.barcode) {
                        const duplicate = this.data.products.find(p => p.barcode === newProductData.barcode && p.id !== id);
                        if (duplicate) {
                            this.showToast(`‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${duplicate.name}"`, 'error');
                            return;
                        }
                    }

                    if (id) {
                        const index = this.data.products.findIndex(p => p.id === id); 
                        if (index > -1) {
                            const oldProduct = this.data.products[index];
                            const newName = newProductData.name;
                            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á (Logic ‡πÄ‡∏î‡∏¥‡∏°)
                            if (oldProduct.name !== newName) {
                                this.data.sales.forEach(sale => { sale.items.forEach(item => { if (item.productId === id) item.name = newName; }); });
                                this.data.stockIns.forEach(stockIn => { if (stockIn.productId === id) stockIn.productName = newName; });
                                this.data.stockOuts.forEach(stockOut => { if (stockOut.productId === id) stockOut.productName = newName; });
                            }
                            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                            this.data.products[index].name = newProductData.name;
                            this.data.products[index].unit = newProductData.unit;
                            this.data.products[index].barcode = newProductData.barcode; // [‡πÉ‡∏´‡∏°‡πà]
                        }
                    } else {
                        newProductData.id = Date.now();
                        newProductData.stock = 0;
                        newProductData.costPrice = 0;
                        newProductData.sellingPrice = 0;
                        this.data.products.push(newProductData);
                    }
                    this.saveData();
                    this.renderProductTable();
                    document.getElementById('product-form').reset();
                    document.getElementById('product-id').value = '';
                },

                editProduct(id) { 
                    const product = this.data.products.find(p => p.id == id); 
                    if(product) { 
                        document.getElementById('product-id').value = product.id; 
                        document.getElementById('product-barcode').value = product.barcode || ''; // [‡πÉ‡∏´‡∏°‡πà]
                        document.getElementById('product-name').value = product.name; 
                        document.getElementById('product-unit').value = product.unit; 
                        
                        // [‡πÉ‡∏´‡∏°‡πà] ‡πÉ‡∏´‡πâ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢
                        setTimeout(() => document.getElementById('product-barcode').focus(), 100);
                    } 
                },
‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤ POS
3.1 ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï renderPos (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏ä‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)

JavaScript

                renderPos(payload = null) {
                    this.editingSaleContext = null;
                    const productSelect = document.getElementById('pos-product');
                    if (!productSelect) return;

                    let availableProducts = this.data.products;
                    if (this.currentUser.role === 'seller') {
                        const assignedIds = this.currentUser.assignedProductIds || [];
                        availableProducts = availableProducts.filter(p => assignedIds.includes(p.id));
                    }
                    const productsInStock = availableProducts.filter(p => p.stock > 0);

                    if (this.currentUser.role === 'seller' && productsInStock.length === 1) {
                        const singleProduct = productsInStock[0];
                        productSelect.innerHTML = `<option value="${singleProduct.id}">${singleProduct.name} (‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${this.formatNumberSmart(singleProduct.stock)})</option>`;
                        productSelect.disabled = true;
                        productSelect.classList.add('single-product-seller');
                    } else {
                        productSelect.innerHTML = '<option value="">--- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ---</option>';
                        productsInStock.forEach(p => {
                            productSelect.innerHTML += `<option value="${p.id}">${p.name} (‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${this.formatNumberSmart(p.stock)})</option>`;
                        });
                        productSelect.disabled = false;
                        productSelect.classList.remove('single-product-seller');
                    }

                    // --- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Date/Time ---
                    const now = new Date();
                    const dateString = now.toISOString().split('T')[0];
                    const timeString = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
                    
                    if (payload) { // ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
                        this.editingSaleContext = {
                            sellerId: payload.sellerId,
                            sellerName: payload.sellerName,
                            storeId: payload.storeId,
                            storeName: payload.storeName
                        };
                        this.cart = [];
                        payload.items.forEach(item => {
                            const product = this.data.products.find(p => p.id === item.productId);
                            if (product) {
                                const costAtTimeOfSale = (typeof item.cost === 'number' && !isNaN(item.cost)) ? item.cost : product.costPrice;
                                this.cart.push({
                                    id: product.id,
                                    name: product.name,
                                    quantity: item.quantity,
                                    sellingPrice: item.price,
                                    costPrice: costAtTimeOfSale,
                                    isSpecialPrice: item.isSpecialPrice,
                                    originalPrice: item.originalPrice
                                });
                            }
                        });

                        if (payload.paymentMethod === '‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï') {
                            document.querySelector('input[name="payment-method"][value="‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï"]').checked = true;
                            document.getElementById('credit-buyer-name').value = payload.buyerName || '';
                            if (payload.creditDueDate && payload.date) {
                                const saleD = new Date(payload.date);
                                const dueD = new Date(payload.creditDueDate);
                                const timeDiff = dueD.getTime() - saleD.getTime();
                                const dayDiff = Math.round(timeDiff / (1000 * 3600 * 24));
                                document.getElementById('credit-due-days').value = dayDiff >= 0 ? dayDiff : '';
                            } else {
                                document.getElementById('credit-due-days').value = '';
                            }
                        } else if (payload.paymentMethod === '‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô') {
                            document.querySelector('input[name="payment-method"][value="‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô"]').checked = true;
                            document.getElementById('transfer-name').value = payload.transferorName || '';
                        } else {
                            document.querySelector('input[name="payment-method"][value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î"]').checked = true;
                        }

                        document.getElementById('pos-date').value = payload.date.split('T')[0];
                        const d = new Date(payload.date);
                        document.getElementById('pos-time').value = `${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`
                    } else {
                        const dateInput = document.getElementById('pos-date');
                        const timeInput = document.getElementById('pos-time');
                        
                        if (!dateInput.value) { dateInput.value = dateString; }
                        if (!timeInput.value) { timeInput.value = timeString; }
                        
                        if (this.cart.length === 0) {
                            document.querySelector('input[name="payment-method"][value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î"]').checked = true;
                            document.getElementById('pos-date').classList.remove('backdating-active');
                            document.getElementById('pos-time').classList.remove('backdating-active');
                        }
                    }
                    this.renderCart();
                    this.togglePaymentDetailFields();
                    this.updateSpecialPriceInfo();

                    // [‡πÉ‡∏´‡∏°‡πà] ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ POS
                    const barcodeInput = document.getElementById('pos-barcode-input');
                    if (barcodeInput) setTimeout(() => barcodeInput.focus(), 100); 
                },
3.2 ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà handleBarcodeScan ‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô addToCart (‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô object App)

JavaScript

                // [‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà] ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
                handleBarcodeScan(e) {
                    e.preventDefault();
                    const barcodeInput = document.getElementById('pos-barcode-input');
                    const barcode = barcodeInput.value.trim();

                    if (!barcode) return;

                    // 1. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                    const product = this.data.products.find(p => p.barcode === barcode);

                    if (product) {
                        // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Seller)
                        if (this.currentUser.role === 'seller') {
                            const assignedIds = this.currentUser.assignedProductIds || [];
                            if (!assignedIds.includes(product.id)) {
                                this.showToast('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ', 'error');
                                barcodeInput.value = '';
                                return;
                            }
                        }

                        // 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å
                        if (product.stock <= 0) {
                            this.showToast(`‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${product.name}" ‡∏´‡∏°‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å!`, 'error');
                            barcodeInput.value = '';
                            return;
                        }

                        // 4. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (+1)
                        const quantity = 1;
                        const existingCartItem = this.cart.find(item => item.id === product.id && !item.isSpecialPrice);

                        if (existingCartItem) {
                            if (existingCartItem.quantity + quantity > product.stock) {
                                this.showToast('‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠', 'error');
                            } else {
                                existingCartItem.quantity += quantity;
                                this.showToast(`‡πÄ‡∏û‡∏¥‡πà‡∏° ${product.name} ‡πÅ‡∏•‡πâ‡∏ß (+1)`);
                            }
                        } else {
                            this.cart.push({
                                id: product.id,
                                name: product.name,
                                quantity: quantity,
                                sellingPrice: product.sellingPrice,
                                costPrice: product.costPrice,
                                isSpecialPrice: false,
                                originalPrice: product.sellingPrice
                            });
                            this.showToast(`‡πÄ‡∏û‡∏¥‡πà‡∏° ${product.name} ‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤`);
                        }

                        // 5. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                        this.renderCart();
                        barcodeInput.value = '';
                        barcodeInput.focus(); // ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡πÅ‡∏Å‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ

                    } else {
                        this.showToast(`‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î: ${barcode}`, 'error');
                        barcodeInput.value = '';
                    }
                },
‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Event Listener
‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô attachEventListeners ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î const mainApp = document.getElementById('main-app'); ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö scan-barcode-form ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô Event Listener ‡∏Ñ‡∏£‡∏±‡∏ö

‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥: ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà mainApp.addEventListener('submit', (e) => { ... }); ‡πÄ‡∏î‡∏¥‡∏° ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ (‡∏ú‡∏°‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° + ‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß):

JavaScript

            mainApp.addEventListener('submit', (e) => { 
                // [‡πÉ‡∏´‡∏°‡πà] ‡πÄ‡∏û‡∏¥‡πà‡∏° Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
                if (e.target.id === 'scan-barcode-form') { 
                    e.preventDefault(); 
                    this.handleBarcodeScan(e); 
                    return; // ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏≠‡∏∑‡πà‡∏ô
                }

                if (e.target.id === 'add-to-cart-form') { e.preventDefault(); this.addToCart(e); }
                if (e.target.id === 'product-form') { e.preventDefault(); this.saveProduct(e); } 
                if (e.target.id === 'store-form') { e.preventDefault(); this.saveStore(e); } 
                if (e.target.id === 'stock-in-form') { e.preventDefault(); this.saveStockIn(e); }
                if (e.target.id === 'stock-out-form') { e.preventDefault(); this.saveStockOut(e); }
                if (e.target.id === 'report-filter-form') { e.preventDefault(); this.renderReport(e); } 
                if (e.target.id === 'user-form') { e.preventDefault(); this.saveUser(e); }
                if (e.target.id === 'seller-sales-filter-form') { e.preventDefault(); this.renderSellerSalesHistoryWithFilter(); }
                if (e.target.id === 'seller-detailed-report-form') { e.preventDefault(); this.runSellerDetailedReport(); }
                if (e.target.id === 'seller-credit-report-form') { e.preventDefault(); this.runSellerCreditSummary(); }
                if (e.target.id === 'seller-transfer-report-form') { e.preventDefault(); this.runSellerTransferSummary(); }
                if (e.target.id === 'backup-password-form') { e.preventDefault(); this.saveBackupPassword(e); }
            }); 
‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö! üéâ
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå script.js ‡∏ï‡∏≤‡∏° 4 ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞:

‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á "‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î" ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡πÜ ‡πÄ‡∏î‡πà‡∏ô‡πÜ ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢

‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å "‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î" ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏¥‡∏á‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡πÄ‡∏î‡πâ‡∏á‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°)

‡∏™‡πÅ‡∏Å‡∏ô‡∏ã‡πâ‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏° = ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô

‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏¢‡∏¥‡∏á‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ!